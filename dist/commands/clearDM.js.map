{"version":3,"file":"clearDM.js","sourceRoot":"/","sources":["commands/clearDM.ts"],"names":[],"mappings":";;AAAA,4CAAyD;AACzD,2CAAmE;AAEnE;;;;EAIE;AAEF,MAAqB,UAAW,SAAQ,uBAAW;IAC3C,MAAM,CAAC,IAAI,GAA6C,IAAI,gCAAmB,EAAE;SACtF,OAAO,CAAC,SAAS,CAAC;SAClB,cAAc,CAAC,6CAA6C,CAAC,CAAC;IAChE,YAAY,MAAsB;QACjC,KAAK,CAAC,MAAM,CAAC,CAAC;IACf,CAAC;IAED,KAAK,CAAC,OAAO,CAAC,WAA+B;QAC5C,WAAW,CAAC,UAAU,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;QAE5C,MAAM,EAAE,GAAG,MAAM,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;QAE7C,IAAI,QAAQ,GAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC;aACtD,MAAM,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,KAAK,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QAClE,OAAM,QAAQ,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC;YACzB,KAAI,MAAM,OAAO,IAAI,QAAQ;gBAC5B,MAAM,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;YAC3B,IAAG,QAAQ,CAAC,IAAI,GAAG,GAAG;gBACrB,MAAM;YACP,QAAQ,GAAG,MAAM,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC;QACpD,CAAC;QACD,MAAM,WAAW,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,gCAAgC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;IAC5F,CAAC;;AAvBF,6BAwBC","sourcesContent":["import {BaseCommand, ExtendedClient} from \"../structure\";\nimport {CommandInteraction, SlashCommandBuilder} from \"discord.js\";\n\n/*\nCopyright © 2024 小兽兽/zhiyan114 (github.com/zhiyan114)\nFile is licensed respectively under the terms of the Creative Commons Attribution 4.0 International\nor whichever license the project is using at the time https://github.com/Sayrix/Ticket-Bot/blob/main/LICENSE.md\n*/\n\nexport default class AddCommand extends BaseCommand {\n\tpublic static data: SlashCommandBuilder = <SlashCommandBuilder>new SlashCommandBuilder()\n\t\t.setName(\"cleardm\")\n\t\t.setDescription(\"Clear all of your ticket history in your DM\");\n\tconstructor(client: ExtendedClient) {\n\t\tsuper(client);\n\t}\n\n\tasync execute(interaction: CommandInteraction) {\n\t\tinteraction.deferReply({ ephemeral: true });\n\n\t\tconst dm = await interaction.user.createDM();\n\n\t\tlet messages = (await dm.messages.fetch({ limit: 100 }))\n\t\t\t.filter((message) => message.author.id === this.client.user?.id);\n\t\twhile(messages.size > 0) {\n\t\t\tfor(const message of messages)\n\t\t\t\tawait message[1].delete();\n\t\t\tif(messages.size < 100)\n\t\t\t\tbreak;\n\t\t\tmessages = await dm.messages.fetch({ limit: 100 });\n\t\t}\n\t\tawait interaction.followUp({ content: \"Cleared all of your DM history\", ephemeral: true });\n\t}\n}\n"]}